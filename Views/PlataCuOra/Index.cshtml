@model IEnumerable<ManagementulStatelorDeFunctii.ViewModels.PlataCuOraViewModels.CadruDidacticCuDisciplinePlataCuOraViewModel>

@{
    ViewData["Title"] = "Profesori Plata cu Ora";
    int StatDeFunctieId = (int)ViewBag.StatDeFunctieId;
    int semestru = (int)ViewBag.Semestru;
}

<a asp-controller="StatDeFunctie"
   asp-action="Index"
   asp-route-id="@ViewBag.StatDeFunctieId"
   class="btn btn-secondary mb-3">
    &larr; Înapoi la Statul De Funcție
</a>


<h2>Profesori în Plata cu Ora</h2>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <a asp-action="AdaugaCadruLaPlataCuOra" method="get" class="btn btn-success"
        asp-route-statDeFunctieId="@ViewBag.StatDeFunctieId"
        asp-route-semestru="@ViewBag.Semestru">
            <i class="bi bi-plus-lg"></i> Adaugă Profesor
        </a>

        <h4 class="mb-0">
            Total general semestru:
            <span class="text-primary fw-bold">
                @Model.Sum(p => p.TotalPlataPeSemestru).ToString("0.00") lei
            </span>
        </h4>
    </div>


@if (!Model.Any())
{
    <div class="alert alert-warning">Nu există profesori pentru semestrul specificat.</div>
}
else
{

    <hr />

    foreach (var profesor in Model)
    {
        <div class="card mb-4 shadow-sm">
            <div class="card-header">
                <strong>@profesor.NumeProfesor</strong> – @profesor.Grad
                <span class="float-end">Tarif: <strong>@profesor.TarifPlataCuOra</strong> lei/oră</span>           
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-sm">
                        <thead class="table-secondary">
                        <tr>
                            <th style="width: 180px;">Disciplina</th>
                            <th style="width: 150px;">Program De Studiu</th>
                            <th style="width: 40px;">An</th>
                            <th style="width: 50px;">Grupe</th>
                            <th style="width: 100px;">Teoretic/săpt</th>
                            <th style="width: 100px;">Practic/săpt</th>
                            <th style="width: 120px;">Total ore/sem</th>
                            <th style="width: 90px;">Săptămâni</th>
                            <th style="width: 100px;">Total Plata</th>
                        </tr>
                        </thead>
                        <tbody>
                        @foreach (var d in profesor.DisciplineActivitati)
                        {
                            <tr>
                                <td>@d.DenumireDisciplina</td>
                                <td>@d.ProgramDeStudiu</td>
                                <td>@d.AnStudiu</td>
                                <td>@d.NumarGrupe</td>
                                <td>@d.ActivitateTeoretica</td>
                                <td>@d.ActivitatePractica</td>
                                <td>@d.OrePeSemestru.ToString("0.##")</td>
                                <td>@d.NumarSaptamaniActivitate</td>
                                <td>@d.PlataPeSemestru.ToString("0.00") lei</td>
                            </tr>
                        }
                        </tbody>
                    </table>
                </div>
                <div class="d-flex justify-content-between align-items-center mt-2">
                    <a asp-controller="PlataCuOra" asp-action="EditareCadruPlataCuOra"
                    asp-route-cadruDidacticId="@profesor.CadruDidacticId"
                    asp-route-statDeFunctieId="@ViewBag.StatDeFunctieId"
                    asp-route-semestru="@ViewBag.Semestru"
                    class="btn btn-outline-primary btn-sm">
                        Editează
                    </a>

                    <p class="fw-semibold mb-0">
                        Total profesor (pe semestru): 
                        <span class="text-success">@profesor.TotalPlataPeSemestru.ToString("0.00") lei</span>
                    </p>
                </div>
            </div>
        </div>
    }


}
